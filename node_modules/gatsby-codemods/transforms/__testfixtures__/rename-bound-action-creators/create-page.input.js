"use strict";

const _require = require(`gatsby-source-filesystem`),
      createFilePath = _require.createFilePath;

exports.onCreateNode = ({
  node,
  getNode,
  boundActionCreators
}) => {
  const createNodeField = boundActionCreators.createNodeField;

  if (node.internal.type === `MarkdownRemark`) {
    const slug = createFilePath({
      node,
      getNode,
      basePath: `pages`
    });
    createNodeField({
      node,
      name: `slug`,
      value: slug
    });
  }
};

exports.createPages = ({
  graphql,
  boundActionCreators
}) => new Promise((resolve, reject) => {
  graphql(`
      {
        allMarkdownRemark {
          edges {
            node {
              fields {
                slug
              }
            }
          }
        }
      }
    `).then(result => {
    console.log(JSON.stringify(result, null, 4));
    resolve();
  });
});